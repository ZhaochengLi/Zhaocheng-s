[Souce: CSDN from Wechat] 作者：极客猴，热衷于 Python，目前擅长于利用 Python制作网路爬虫以及 Django 框架; 版权归对方所有。

# 如何使用 Python 生成二维码图片。

## 二维码 Intro:

二维码（2-dimensional bar code），是用某种特定的几何图形按一定规律在平面（二维方向上）分布的黑白相间的图形记录数据符号信息的。它能将数字、英文字母、汉字、日文字母、特殊符号（如空格，%，/ 等）、二进制等信息记录到一个正方形的图片中。

因此，在转换的过程中，离不开编码压缩方式。在许多种类的二维条码中，常用的码制有：Data Matrix，Maxi Code，Aztec，QR Code，Vericode，PDF417，Ultracode，Code 49，Code 16K等。

二维码在现实生活中的应用越来与普遍，归功于 QR code 码制的流行。我们常说的二维码就是它，***所以，二维码又被称为 QR code***.

QR code 是一种矩阵式二维条码（又称棋盘式二维条码）。它是在一个矩形空间通过黑、白像素在矩阵中的不同分布进行编码。在矩阵相应元素位置上，用点（方点、圆点或其他形状）的出现表示二进制“1”，点的不出现表示二进制的“0”，点的排列组合确定了矩阵式二维条码所代表的意义。


## 二维码结构

我们的目的是要使用 Python 生成 QR 码，那我们需要先了解二维码（QR码）的结构。

根据标准（ISO/IEC 18004），我们可以了解到 QR 码结构如下：

![image](https://github.com/ZhaochengLi/Zhaocheng-s/blob/master/source/images/qrcode/QRcode.jpg)

图片来源于网络

### 1、功能图形

功能图形是不参与编码数据的区域。它包含空白区、位置探测图形、位置探测图形分隔符、定位图形、校正图形五大模块。

空白区：空白区顾名思义就是要留空白。因此，这里不能有任何图样或标记，这样才能保证 QR 能被识别。

位置探测图形：这个有点类似中文的“回”字。在 QR 码中有个这样的标识，它分别位于左上、右上和左下角，作用是协助扫描软件定位 QR 码并转换坐标系。我们在扫描二维码的时候，不管是竖着扫、横着扫、斜着扫都能识别出内容，主要是它的功劳。

位置探测图形分隔符：主要作用是区分功能图形和编码区域。

定位图形：它由黑白间隔的格子组成的线条，主要用于指示标识密度和确定坐标系。原因是 QR 码一种有 40 个版本，也就是说有 40 种尺寸。每种二维码的尺寸越大，扫描的距离就越远。

校正图形：只有 Version 2 及以上的QR码有校正标识，校正标识用于进一步校正坐标系。

### 2、 编码区域

编码区域是数据进行编码存储的区域，它由格式信息、版本信息、数据和纠错码字三部分构成。

格式信息：所有尺寸的二维码都有该信息。它存放一些格式化数据的信息，例如容错级别、数据掩码，和额外的自身 BCH 容错码。

版本信息：版本信息是规定二维码的规格。前面讲到 QR 码一共有 40 种规格的矩阵（一般为黑白色），从21x21（版本1），到177x177（版本40），每一版本符号比前一版本的每边增加4个模块。

数据和纠错码：主要是存储实际数据以及用于纠错码字。

## 二维码的绘制过程

二维码已经有一套国际标准了，所以绘制二维码的过程要严格按照标准来执行。这个过程比较复杂，下面总结出了大致绘制过程。如果你想深入了解绘制细节，可以阅读具体标准。

二维码的绘制大概过程如下：

在二维码的左上角、左下角、右上角绘制位置探测图形，位置探测图形一定是一个 7x7 的矩阵；

绘制校正图形，校正图形一定是一个 5x5 的矩阵；

绘制两条连接三个位置探测图形的定位图形；

在上述图片的基础上，继续绘制格式信息；

接着绘制版本信息；

填充数据码和纠错码到二维码图中；

最后绘制蒙版图案。因为按照上述方式填充内容，可能会出现大面积空白或黑块的情况，导致扫描识别十分困难。所以需要对整个图像与蒙版进行蒙版操作(Masking)，蒙版操作即为异或 XOR 操作。在这一步，我们可以将数据排列成各种图片。

## 二维码的生成

我们既然已经了解二维码原理，那么可以利用 Python 生成二维码. But we do not need to start from scratch, 使用现成的库即可。

推荐两个库：qrcode 和 python-qrcode。

We will explore more in the further practices.

End.

By the way, these are the QR code designed for my GitHub webpage:

[pic]()
